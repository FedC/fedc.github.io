import React, { useEffect, useRef } from 'react';
import { gsap } from 'gsap';
import * as styles from './Logo.module.scss';

const Logo = ({ animate, isInfoPageOpen }) => {
  const textRef = useRef(null);
  const isMobile = window.innerWidth <= 768;

  useEffect(() => {
    if (!animate || !isMobile) return;

    const textElement = textRef.current;
    const getTextForFilter = (filter) => {
      switch (filter) {
        case 'commercial':
          return 'commercial';
        case 'residential':
          return 'residential';
        default:
          return 'architecture';
      }
    };

    const newText = getTextForFilter(animate);
    const currentText = textElement.textContent;

    if (currentText === newText) return;

    const tl = gsap.timeline();
    
    tl.to(textElement, {
      duration: 0.3,
      opacity: 0,
      ease: 'power2.inOut',
      onComplete: () => {
        textElement.textContent = newText;
      }
    })
    .to(textElement, {
      duration: 0.3,
      opacity: 1,
      ease: 'power2.inOut'
    });

    return () => {
      tl.kill();
    };
  }, [animate]);

  useEffect(() => {
    if (!textRef.current) return;

    const textElement = textRef.current;
    const tl = gsap.timeline();

    if (isInfoPageOpen) {
      tl.to(textElement, {
        duration: 0.3,
        opacity: 0,
        ease: 'power2.inOut'
      });
    } else {
      tl.to(textElement, {
        duration: 0.3,
        opacity: 1,
        ease: 'power2.inOut'
      });
    }

    return () => {
      tl.kill();
    };
  }, [isInfoPageOpen]);

  return (
    <div className={styles.logo}>
      <svg viewBox="0 0 245 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlnsXlink="http://www.w3.org/1999/xlink">
        <g stroke="none" strokeWidth="1" fill="none" fillRule="evenodd">
          <g transform="translate(-10.000000, -18.000000)">
            <g transform="translate(10.000000, 13.000000)">
              <g transform="translate(0.000000, 5.000000)" fillRule="nonzero">
                <g>
                  <path d="M5.56613059,18 C4.55268973,18 3.61720586,17.7593168 2.75967898,17.2779503 C1.91774349,16.7965839 1.24731339,16.136646 0.748388656,15.2981366 C0.249462366,14.4596273 0,13.5124224 0,12.4565217 C0,11.4782609 0.249462366,10.5776398 0.748388656,9.75465839 C1.24731339,8.91614907 1.92553919,8.2484472 2.78306608,7.7515528 C3.65618435,7.25465839 4.61505532,7.00621118 5.65967898,7.00621118 C6.53279726,7.00621118 7.28118435,7.14596273 7.90484027,7.42546584 C8.52849618,7.70496894 9.1365607,8.13975155 9.72903382,8.72981366 L9.72903382,9.98757764 C9.21451769,9.22670807 8.63763597,8.65217391 7.99838866,8.26397516 C7.37473274,7.86024845 6.59516285,7.65838509 5.65967898,7.65838509 C4.8021521,7.65838509 3.99139941,7.88354037 3.22742091,8.33385093 C2.47903382,8.76863354 1.878765,9.35869565 1.42661446,10.1040373 C0.974463925,10.8493789 0.748388656,11.6490683 0.748388656,12.5031056 C0.748388656,13.4347826 0.966668226,14.2732919 1.40322737,15.0186335 C1.83978651,15.7484472 2.42446392,16.3229814 3.15725962,16.742236 C3.90564672,17.1459627 4.70860371,17.3478261 5.56613059,17.3478261 C7.31236715,17.3478261 8.70000156,16.5636646 9.72903382,14.9953416 L9.72903382,16.2531056 C9.16774349,16.8431677 8.54408758,17.2857143 7.85806608,17.5807453 C7.18763597,17.8602484 6.42365747,18 5.56613059,18 Z M11.7991505,7.21583851 L12.5475376,7.21583851 L12.5475376,9.63819876 C12.8593655,8.87732919 13.3115161,8.27950311 13.9039892,7.8447205 C14.5120537,7.40993789 15.198044,7.19254658 15.9620225,7.19254658 C16.4453559,7.19254658 16.9364849,7.29347826 17.4354096,7.49534161 L17.4354096,8.35714286 C16.9832591,8.01552795 16.4765387,7.8447205 15.9152483,7.8447205 C15.353958,7.8447205 14.8082591,8.01552795 14.2781827,8.35714286 C13.7636666,8.69875776 13.3426989,9.1568323 13.0152795,9.73136646 C12.7034516,10.3059006 12.5475376,10.9192547 12.5475376,11.5714286 L12.5475376,17.697205 L11.7991505,17.697205 L11.7991505,7.21583851 Z M23.704087,17.3245342 C24.5148397,17.3245342 25.2866139,17.1149068 26.0194096,16.6956522 C26.7522053,16.2763975 27.3602698,15.7018634 27.8436032,14.9720497 L27.8436032,16.1599379 C27.2667215,16.7965839 26.6352698,17.2624224 25.9492483,17.5574534 C25.2632268,17.8369565 24.4836569,17.9767081 23.6105387,17.9767081 C22.643872,17.9767081 21.7317752,17.7204969 20.8742483,17.2080745 C20.0323128,16.6956522 19.354087,16.0124224 18.8395709,15.1583851 C18.3406462,14.3043478 18.0911838,13.3959627 18.0911838,12.4332298 C18.0911838,11.3928571 18.3406462,10.4611801 18.8395709,9.63819876 C19.3384956,8.79968944 20.0167215,8.14751553 20.8742483,7.68167702 C21.7473666,7.21583851 22.7140333,6.98291925 23.7742483,6.98291925 C25.3957537,6.98291925 26.7755924,7.61956522 27.9137645,8.89285714 L20.5702161,16.113354 C21.0847322,16.5326087 21.5836569,16.8431677 22.0669903,17.0450311 C22.5503236,17.2313665 23.0960225,17.3245342 23.704087,17.3245342 Z M18.8395709,12.363354 C18.8395709,13.6521739 19.2683344,14.7546584 20.1258612,15.6708075 L26.9782806,8.89285714 C26.4637645,8.44254658 25.9648397,8.1242236 25.4815064,7.9378882 C24.9981731,7.73602484 24.4212913,7.63509317 23.7508612,7.63509317 C22.799786,7.63509317 21.9500548,7.8447205 21.2016677,8.26397516 C20.468872,8.66770186 19.8919903,9.22670807 19.4710225,9.94099379 C19.0500548,10.6552795 18.8395709,11.4627329 18.8395709,12.363354 Z M53.7903226,17.2236025 C54.6010753,17.2236025 55.3728495,17.0139752 56.1056452,16.5947205 C56.8384409,16.1754658 57.4465054,15.6009317 57.9298387,14.871118 L57.9298387,16.0590062 C57.352957,16.6956522 56.7215054,17.1614907 56.0354839,17.4565217 C55.3494624,17.7360248 54.5698925,17.8757764 53.6967742,17.8757764 C52.7301075,17.8757764 51.8180108,17.6195652 50.9604839,17.1071429 C50.1185484,16.5947205 49.4403226,15.9114907 48.9258065,15.0574534 C48.4268817,14.2034161 48.1774194,13.2950311 48.1774194,12.3322981 C48.1774194,11.2919255 48.4268817,10.3602484 48.9258065,9.53726708 C49.4247312,8.69875776 50.102957,8.04658385 50.9604839,7.58074534 C51.8336022,7.11490683 52.8002688,6.88198758 53.8604839,6.88198758 C55.4819892,6.88198758 56.861828,7.51863354 58,8.79192547 L50.6564516,16.0124224 C51.1709677,16.431677 51.6698925,16.742236 52.1532258,16.9440994 C52.6365591,17.1304348 53.1822581,17.2236025 53.7903226,17.2236025 Z M48.9258065,12.2624224 C48.9258065,13.5512422 49.3545699,14.6537267 50.2120968,15.5698758 L57.0645161,8.79192547 C56.55,8.34161491 56.0510753,8.02329193 55.5677419,7.83695652 C55.0844086,7.63509317 54.5075269,7.53416149 53.8370968,7.53416149 C52.8860215,7.53416149 52.0362903,7.74378882 51.2879032,8.16304348 C50.5551075,8.56677019 49.9782258,9.1257764 49.5572581,9.84006211 C49.1362903,10.5543478 48.9258065,11.3618012 48.9258065,12.2624224 Z M35.2111623,17.9534161 C34.2133128,17.9534161 33.2856247,17.7049689 32.4280978,17.2080745 C31.5705709,16.7111801 30.8923451,16.0434783 30.3934204,15.2049689 C29.8944956,14.3509317 29.6450333,13.4347826 29.6450333,12.4565217 C29.6450333,11.4782609 29.8944956,10.5698758 30.3934204,9.73136646 C30.8923451,8.87732919 31.5705709,8.20186335 32.4280978,7.70496894 C33.2856247,7.20807453 34.2133128,6.95962733 35.2111623,6.95962733 C36.2246032,6.95962733 37.1834741,7.23136646 38.0877752,7.77484472 C38.9920763,8.30279503 39.6235279,8.99378882 39.9821301,9.84782609 L39.9821301,7.21583851 L40.7305172,7.21583851 L40.7305172,17.697205 L39.9821301,17.697205 L39.9821301,15.0885093 C39.5611623,15.9580745 38.9063236,16.6568323 38.0176139,17.1847826 C37.1444956,17.697205 36.2090118,17.9534161 35.2111623,17.9534161 Z M35.2579365,17.3012422 C36.1154634,17.3012422 36.9106247,17.0838509 37.6434204,16.6490683 C38.3762161,16.1987578 38.9530978,15.6086957 39.3740655,14.878882 C39.8106247,14.1335404 40.0289042,13.326087 40.0289042,12.4565217 C40.0289042,11.6024845 39.8106247,10.802795 39.3740655,10.0574534 C38.9375064,9.3121118 38.352829,8.72204969 37.6200333,8.28726708 C36.8872376,7.83695652 36.0920763,7.61180124 35.2345494,7.61180124 C34.3770225,7.61180124 33.5740655,7.83695652 32.8256784,8.28726708 C32.0928827,8.73757764 31.5004096,9.33540373 31.0482591,10.0807453 C30.6116999,10.826087 30.3934204,11.6257764 30.3934204,12.4798137 C30.3934204,13.3338509 30.6116999,14.1335404 31.0482591,14.878882 C31.5004096,15.6086957 32.1006784,16.1987578 32.8490655,16.6490683 C33.5974526,17.0838509 34.4004096,17.3012422 35.2579365,17.3012422 Z M47.4476032,17.8369565 C46.2938397,17.8369565 45.3349688,17.4875776 44.5709903,16.7888199 C43.8226032,16.0900621 43.4484096,15.1273292 43.4484096,13.9006211 L43.4484096,3 L44.1967967,3 L44.1967967,7.21583851 L47.4242161,7.21583851 L47.4242161,7.86801242 L44.1967967,7.86801242 L44.1967967,13.9006211 C44.1967967,14.9254658 44.500829,15.7329193 45.1088935,16.3229814 C45.7325494,16.8975155 46.5121193,17.1847826 47.4476032,17.1847826 L47.4476032,17.8369565 Z" fill="#FFFFFF"></path>
                  <path d="M76.596953,17.976378 C75.5778999,17.976378 74.6372356,17.7244094 73.7749599,17.2204724 C72.928362,16.7165354 71.2542192,16.0393701 70.7525315,15.1889764 C70.2508438,14.3385827 70,13.4094488 70,12.4015748 C70,11.3937008 70.2508438,10.4645669 70.7525315,9.61417323 C71.2542192,8.76377953 71.928362,8.08661417 72.7749599,7.58267717 C73.6372356,7.07874016 74.5778999,6.82677165 75.596953,6.82677165 C76.5846506,6.82677165 77.5253149,7.09448819 78.4189461,7.62992126 C79.3125772,8.1496063 79.9710423,8.83464567 80.3943413,9.68503937 L80.3943413,0 L81.1468728,0 L81.1468728,17.7165354 L80.3943413,17.7165354 L80.3943413,15.1417323 C79.9240091,15.992126 79.2420274,16.6771654 78.3483963,17.1968504 C77.4704429,17.7165354 76.5532951,17.976378 75.596953,17.976378 Z M75.5734364,17.3149606 C76.435712,17.3149606 77.2352768,17.0944882 77.9721305,16.6535433 C78.724662,16.1968504 79.3204161,15.5984252 79.7593928,14.8582677 C80.2140473,14.1023622 80.4413745,13.2913386 80.4413745,12.4251969 C80.4413745,11.5590551 80.2140473,10.7480315 79.7593928,9.99212598 C79.3204161,9.23622047 78.724662,8.62992126 77.9721305,8.17322835 C77.2352768,7.71653543 76.435712,7.48818898 75.5734364,7.48818898 C74.7111607,7.48818898 73.911596,7.71653543 73.1747422,8.17322835 C72.4378885,8.61417323 71.8499733,9.21259843 71.4109966,9.96850394 C70.9720198,10.7244094 70.7525315,11.5354331 70.7525315,12.4015748 C70.7525315,13.2834646 70.964181,14.1023622 71.3874799,14.8582677 C71.8264566,15.5984252 72.4143719,16.1968504 73.1512256,16.6535433 C73.9037571,17.0944882 74.7111607,17.3149606 75.5734364,17.3149606 Z M93.6516683,17.976378 L91.2529742,12.8267717 L88.8307634,17.976378 L83.7511758,7.08661417 L84.5272239,7.08661417 L88.85428,16.3228346 L90.900225,12 L88.6426305,7.13385827 L89.395162,7.13385827 L91.2764908,11.2440945 L93.2048527,7.08661417 L93.9573842,7.08661417 L91.6527565,12.023622 L93.6516683,16.3464567 L97.9081746,7.11023622 L98.6607061,7.11023622 L93.6516683,17.976378 Z M104.940111,17.3385827 C105.755353,17.3385827 106.531402,17.1259843 107.268255,16.7007874 C108.005109,16.2755906 108.616541,15.6929134 109.102551,14.9527559 L109.102551,16.1574803 C108.522475,16.8031496 107.887526,17.2755906 107.197706,17.5748031 C106.507885,17.8582677 105.723998,18 104.846045,18 C103.874025,18 102.956877,17.7401575 102.094601,17.2204724 C101.248003,16.7007874 100.566022,16.007874 100.048656,15.1417323 C99.5469687,14.2755906 99.2961248,13.3543307 99.2961248,12.3779528 C99.2961248,11.3228346 99.5469687,10.3779528 100.048656,9.54330709 C100.550344,8.69291339 101.232326,8.03149606 102.094601,7.55905512 C102.972555,7.08661417 103.944575,6.8503937 105.010661,6.8503937 C106.641146,6.8503937 108.028626,7.49606299 109.173101,8.78740157 L101.788885,16.1102362 C102.306251,16.5354331 102.807938,16.8503937 103.293948,17.0551181 C103.779958,17.2440945 104.328679,17.3385827 104.940111,17.3385827 Z M100.048656,12.3070866 C100.048656,13.6141732 100.479794,14.7322835 101.34207,15.6614173 L108.232436,8.78740157 C107.715071,8.33070866 107.213383,8.00787402 106.727373,7.81889764 C106.241363,7.61417323 105.661287,7.51181102 104.987144,7.51181102 C104.030802,7.51181102 103.176365,7.72440945 102.423834,8.1496063 C101.68698,8.55905512 101.106904,9.12598425 100.683605,9.8503937 C100.260306,10.5748031 100.048656,11.3937008 100.048656,12.3070866 Z M115.546729,17.9291339 C114.809875,17.9291339 114.135732,17.7637795 113.5243,17.4330709 C112.912869,17.0866142 112.426859,16.6062992 112.066271,15.992126 C111.705683,15.3779528 111.525389,14.6929134 111.525389,13.9370079 L111.525389,0 L112.27792,0 L112.27792,13.9370079 C112.27792,14.5669291 112.41902,15.1338583 112.701219,15.6377953 C112.999096,16.1417323 113.398879,16.5433071 113.900566,16.8425197 C114.402254,17.1259843 114.950975,17.2677165 115.546729,17.2677165 L115.546729,17.9291339 Z M122,17.9291339 C121.263146,17.9291339 120.589003,17.7637795 119.977572,17.4330709 C119.36614,17.0866142 118.88013,16.6062992 118.519542,15.992126 C118.158954,15.3779528 117.97866,14.6929134 117.97866,13.9370079 L117.97866,0 L118.731191,0 L118.731191,13.9370079 C118.731191,14.5669291 118.872291,15.1338583 119.15449,15.6377953 C119.452367,16.1417323 119.85215,16.5433071 120.353837,16.8425197 C120.855525,17.1259843 121.404246,17.2677165 122,17.2677165 L122,17.9291339 Z" fill="#F5AA0D" className="js-logo-dwell"></path>
                  <path className="js-orange-half" d="M65,8 L65.1996403,8.00489531 C67.3160315,8.10892112 69,9.85780461 69,12 C69,14.209139 67.209139,16 65,16 L65,16 L65,8 L65,8 Z" fill="#F5AA0D"></path>
                  <path d="M61,8 L61.1996403,8.00489531 C63.3160315,8.10892112 65,9.85780461 65,12 C65,14.209139 63.209139,16 61,16 L61,16 L61,8 L61,8 Z" fill="#FFFFFF" transform="translate(63.000000, 12.000000) rotate(-180.000000) translate(-63.000000, -12.000000) "></path>
                </g>
              </g>
              <text fontFamily="PoiretOne-Regular, Poiret One" fontSize="24" fontWeight="normal" fill="#BEBEBE">
                <tspan ref={textRef} x="128.38" y="23">architecture</tspan>
              </text>
            </g>
          </g>
        </g>
      </svg>
    </div>
  );
}

export default Logo;